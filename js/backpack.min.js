/*!
 * backpack v0.0.3 (https://github.com/docluv/backpack)
 * Copyright 2013-2014 Chris Love
 * Licensed under Apache (https://github.com/docluv/backpack/LICENSE)
 */
!function(a,b){"use strict";var c=function(a){var b=new c.fn.init;return b.settings=$.extend({},b.settings,a),b};return c.fn=c.prototype={constructor:c,init:function(){return this},version:"0.0.4",updateViews:function(a){var b=this,c=document.querySelectorAll(a);[].forEach.call(c,function(a){b.saveViewToStorage(a)})},saveViewToStorage:function(a){var c=this;"string"==typeof a&&(a=document.getElementById(a)),a&&(c.storeViewInfo(c.parseViewInfo(a)),!a.parentNode||a.className.search(c.settings.currentClass)>-1||a.parentNode.removeChild(a),a=b)},parseViewInfo:function(a){return"string"==typeof a&&(a=document.getElementById(a)),typeof a!==b&&null!==a?{pageId:a.id,viewTitle:a.hasAttribute("spa-title")?a.getAttribute("spa-title"):this.settings.defaultTitle,tranistion:a.hasAttribute("spa-transition")?a.getAttribute("spa-transition"):"",content:a.outerHTML}:void 0},storeViewInfo:function(a){var b=this;a=$.extend({},b.pageSettings,a),localStorage.setItem(b.settings.appName+"-"+a.pageId,JSON.stringify(a))},getViewInfo:function(b){var c,d=localStorage[this.settings.appName+"-"+b];return d||(c=document.getElementById(b),c&&(this.saveViewToStorage(c),d=a.localStorage[this.settings.appName+"-"+b])),d?JSON.parse(d):void 0},settings:{viewSelector:".spa-view",defaultTitle:"A Really Cool SPA App",deferredTimeKey:"lastDeferredTime",templateType:"text/x-mustache-template",currentClass:"current",appName:"AppX"},pageSettings:{pageId:"",content:""}},c.fn.init.prototype=c.fn,a.Backpack=c}(window);